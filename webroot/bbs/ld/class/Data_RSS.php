<?php  class Data_RSS_common {function get($name){$tmp ="_".$name;return $this->$tmp;}function set($name, $value){$tmp ="_".$name;$this->$tmp =$value;}function rssQuote($str){$conv_rule =array( '@' => '¡÷', );$str =strtr($str,$conv_rule);$str =htmlspecialchars($str, ENT_QUOTES);return $str;}}class Data_RSS extends Data_RSS_common {var $_title,$_link,$_description,$_language,$_copyright,$_lastbuilddate;var $_items =array();function Data_RSS($title,$link,$description,$language="ja",$copyright="",$lastbuilddate=""){$this->_title =$this->rssQuote($title);$this->_link =$this->rssQuote($link);$this->_description =$this->rssQuote($description);$this->_language =$this->rssQuote($language);$this->_copyright =$this->rssQuote($copyright);$this->_lastbuilddate =$this->rssQuote($lastbuilddate);}function addItem($obj){if (strtolower(get_class($obj))!="data_rss_item"){return;}array_push($this->_items,$obj);}function toString($encode="UTF-8"){$buff ="<?xml version=\"1.0\" encoding=\"$encode\" ?>\n";$buff .="<rss version=\"2.0\">\n";$buff .="<channel>\n";$buff .="<title>".$this->_title."</title>\n";$buff .="<link>".$this->_link."</link>\n";if ($this->_description !=""){$buff .="<description>".$this->_description."</description>\n";}if ($this->_language !=""){$buff .="<language>".$this->_language."</language>\n";}if ($this->_copyright !=""){$buff .="<copyright>".$this->_copyright."</copyright>\n";}if ($this->_lastbuilddate !=""){$buff .="<lastBuildDate>".$this->_lastbuilddate."</lastBuildDate>\n";}foreach ($this->_items as $item){$buff .=$item->toString();}$buff .="</channel>\n";$buff .="</rss>";return $buff;}}class Data_RSS_Item extends Data_RSS_common {var $_title,$_link,$_description,$_pubdate;function Data_RSS_Item($title,$link,$description="",$pubdate=""){$this->_title =$this->rssQuote($title);$this->_link =$this->rssQuote($link);$this->_description =$this->rssQuote($description);$this->_pubdate =$this->rssQuote($pubdate);}function toString(){$buff ="";$buff .="<item>\n";$buff .="<title>".$this->_title."</title>\n";$buff .="<link>".$this->_link."</link>\n";if ($this->_description !=""){$buff .="<description>".$this->_description."</description>\n";}if ($this->_pubdate !=""){$buff .="<pubDate>".$this->_pubdate."</pubDate>\n";}$buff .="</item>\n";return $buff;}}?>